{"version":3,"sources":["webpack:///./src/views/Category.vue?9756","webpack:///src/views/Category.vue","webpack:///./src/views/Category.vue?fb0b","webpack:///./src/views/Category.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","addCate","_v","cateList","columns","scopedSlots","_u","key","fn","scope","$event","editCateClick","row","deleteCateClick","addDialogVisible","addDialogClose","model","value","newModel","callback","$$v","$set","trim","expression","cateProps","handleChange","staticClass","slot","okAdd","editDialogVisible","okEdit","staticRenderFns","name","components","Breadcrumb","data","expandTrigger","label","children","emitPath","checkStrictly","id","methods","created","getCateList","component"],"mappings":"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","file":"js/chunk-2d0c1d78.a8c30472.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('breadcrumb',{attrs:{\"text\":\"分类列表\"}}),_c('el-card',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.addCate}},[_vm._v(\"添加分类\")]),_c('tree-table',{attrs:{\"data\":_vm.cateList,\"show-index\":\"\",\"index-text\":\"序号\",\"columns\":_vm.columns,\"expand-type\":false,\"selection-type\":false,\"border\":\"\"},scopedSlots:_vm._u([{key:\"operate\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-edit\"},on:{\"click\":function($event){return _vm.editCateClick(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"icon\":\"el-icon-delete\"},on:{\"click\":function($event){return _vm.deleteCateClick(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-dialog',{attrs:{\"title\":\"添加分类\",\"visible\":_vm.addDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.addDialogVisible=$event},\"closed\":_vm.addDialogClose}},[_c('el-form',{attrs:{\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\"}},[_c('el-input',{attrs:{\"maxlength\":\"10\"},model:{value:(_vm.newModel.name),callback:function ($$v) {_vm.$set(_vm.newModel, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"newModel.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"分类描述\"}},[_c('el-input',{attrs:{\"maxlength\":\"20\"},model:{value:(_vm.newModel.desc),callback:function ($$v) {_vm.$set(_vm.newModel, \"desc\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"newModel.desc\"}})],1),_c('el-form-item',{attrs:{\"label\":\"选择分类\"}},[_c('el-cascader',{attrs:{\"props\":_vm.cateProps,\"options\":_vm.cateList,\"clearable\":\"\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.newModel.parent),callback:function ($$v) {_vm.$set(_vm.newModel, \"parent\", $$v)},expression:\"newModel.parent\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.addDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.okAdd}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"编辑分类\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event}}},[_c('el-form',{attrs:{\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"分类名称\"}},[_c('el-input',{model:{value:(_vm.model.name),callback:function ($$v) {_vm.$set(_vm.model, \"name\", $$v)},expression:\"model.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"分类描述\"}},[_c('el-input',{attrs:{\"maxlength\":\"20\"},model:{value:(_vm.model.desc),callback:function ($$v) {_vm.$set(_vm.model, \"desc\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"model.desc\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.okEdit}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <breadcrumb text=\"分类列表\" />\r\n    <el-card>\r\n      <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"addCate\"\r\n        >添加分类</el-button\r\n      >\r\n      <!-- 树形表格 -->\r\n      <tree-table\r\n        :data=\"cateList\"\r\n        show-index\r\n        index-text=\"序号\"\r\n        :columns=\"columns\"\r\n        :expand-type=\"false\"\r\n        :selection-type=\"false\"\r\n        border\r\n      >\r\n        <template slot=\"operate\" slot-scope=\"scope\">\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            icon=\"el-icon-edit\"\r\n            @click=\"editCateClick(scope.row)\"\r\n            >编辑</el-button\r\n          >\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"danger\"\r\n            icon=\"el-icon-delete\"\r\n            @click=\"deleteCateClick(scope.row)\"\r\n            >删除</el-button\r\n          >\r\n        </template>\r\n      </tree-table>\r\n    </el-card>\r\n\r\n    <!-- 添加分类对话框 -->\r\n    <el-dialog\r\n      title=\"添加分类\"\r\n      :visible.sync=\"addDialogVisible\"\r\n      width=\"50%\"\r\n      @closed=\"addDialogClose\"\r\n    >\r\n      <el-form label-width=\"80px\">\r\n        <el-form-item label=\"分类名称\">\r\n          <el-input maxlength=\"10\" v-model.trim=\"newModel.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"分类描述\">\r\n          <el-input maxlength=\"20\" v-model.trim=\"newModel.desc\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"选择分类\">\r\n          <!-- 级联选择器 -->\r\n          <el-cascader\r\n            :props=\"cateProps\"\r\n            :options=\"cateList\"\r\n            v-model=\"newModel.parent\"\r\n            clearable\r\n            @change=\"handleChange\"\r\n          ></el-cascader>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"okAdd\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 编辑分类对话框 -->\r\n    <el-dialog title=\"编辑分类\" :visible.sync=\"editDialogVisible\" width=\"50%\">\r\n      <el-form label-width=\"70px\">\r\n        <el-form-item label=\"分类名称\">\r\n          <el-input v-model=\"model.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"分类描述\">\r\n          <el-input maxlength=\"20\" v-model.trim=\"model.desc\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"okEdit\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n \r\n<script>\r\n// 导入网络请求函数\r\nimport {\r\n  createCate,\r\n  getCate,\r\n  updateCate,\r\n  getCateList,\r\n  deleteCate,\r\n} from \"../network/admin/category\";\r\n\r\nimport Breadcrumb from \"../components/Breadcrumb\";\r\n\r\nexport default {\r\n  name: \"CategoryEdit\",\r\n  components: {\r\n    Breadcrumb,\r\n  },\r\n  data() {\r\n    return {\r\n      newModel: {},\r\n      model: {},\r\n      //分类列表数据\r\n      cateList: [],\r\n      cateProps: {\r\n        expandTrigger: \"hover\",\r\n        value: \"_id\",\r\n        label: \"name\",\r\n        children: \"children\",\r\n        emitPath: false,\r\n        checkStrictly: true,\r\n      },\r\n      columns: [\r\n        {\r\n          label: \"分类名称\",\r\n          prop: \"name\",\r\n          align: \"center\",\r\n          headerAlign: \"center\",\r\n        },\r\n        {\r\n          label: \"操作\",\r\n          type: \"template\",\r\n          template: \"operate\",\r\n          align: \"center\",\r\n          headerAlign: \"center\",\r\n        },\r\n      ],\r\n      id: \"\",\r\n      editDialogVisible: false,\r\n      addDialogVisible: false,\r\n    };\r\n  },\r\n  methods: {\r\n    //获取分类列表\r\n    async getCateList() {\r\n      const res = await getCateList();\r\n      const data = res.data;\r\n      // 处理分类数据\r\n      for (let item1 of data) {\r\n        // 第一层\r\n        if (item1.children && item1.children.length === 0) {\r\n          item1.children = null;\r\n          continue;\r\n        }\r\n\r\n        for (let item2 of item1.children) {\r\n          // 第二层\r\n          if (item2.children && item2.children.length === 0) {\r\n            item2.children = null;\r\n            continue;\r\n          }\r\n\r\n          for (let item3 of item2.children) {\r\n            // 第三层\r\n            item3.children = null;\r\n            item3.disabled = true;\r\n          }\r\n        }\r\n      }\r\n\r\n      // console.log(data);\r\n\r\n      this.cateList = data;\r\n    },\r\n    handleChange() {\r\n      // console.log(this.model.parent);\r\n    },\r\n    //添加分类\r\n    addCate() {\r\n      this.addDialogVisible = true;\r\n    },\r\n    async okAdd() {\r\n      const res = await createCate(this.newModel);\r\n      if (!res) return;\r\n      this.$message.success(\"添加分类成功\");\r\n      this.getCateList();\r\n      this.addDialogVisible = false;\r\n    },\r\n    addDialogClose() {\r\n      this.newModel = {};\r\n    },\r\n    //编辑分类\r\n    async editCateClick(row) {\r\n      this.id = row._id;\r\n      const res = await getCate(row._id);\r\n      // console.log(res.data);\r\n      this.model = res.data;\r\n      this.editDialogVisible = true;\r\n    },\r\n    async okEdit() {\r\n      const res = await updateCate(this.id, this.model);\r\n      if (!res) return;\r\n      this.$message.success(\"编辑分类成功\");\r\n      this.getCateList();\r\n      this.editDialogVisible = false;\r\n    },\r\n    //删除分类\r\n    async deleteCateClick(row) {\r\n      try {\r\n        await this.$confirm(\"此操作将永久删除该文件, 是否继续?\", \"提示\", {\r\n          confirmButtonText: \"确定\",\r\n          cancelButtonText: \"取消\",\r\n          type: \"warning\",\r\n        });\r\n\r\n        if (row.children && row.children.length > 0)\r\n          return this.$message.error(\"无法删除包含子分类的父级分类\");\r\n\r\n        const res = await deleteCate(row._id);\r\n        if (!res) return;\r\n        this.$message.success(\"删除分类成功\");\r\n        this.getCateList();\r\n      } catch (error) {\r\n        this.$message.info(\"已取消删除\");\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    this.getCateList();\r\n  },\r\n};\r\n</script>\r\n \r\n<style scoped>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Category.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Category.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Category.vue?vue&type=template&id=16e1b49b&scoped=true&\"\nimport script from \"./Category.vue?vue&type=script&lang=js&\"\nexport * from \"./Category.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"16e1b49b\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}