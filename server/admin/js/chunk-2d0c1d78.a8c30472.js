(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c1d78"],{4886:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("breadcrumb",{attrs:{text:"分类列表"}}),n("el-card",[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addCate}},[e._v("添加分类")]),n("tree-table",{attrs:{data:e.cateList,"show-index":"","index-text":"序号",columns:e.columns,"expand-type":!1,"selection-type":!1,border:""},scopedSlots:e._u([{key:"operate",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(n){return e.editCateClick(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(n){return e.deleteCateClick(t.row)}}},[e._v("删除")])]}}])})],1),n("el-dialog",{attrs:{title:"添加分类",visible:e.addDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addDialogVisible=t},closed:e.addDialogClose}},[n("el-form",{attrs:{"label-width":"80px"}},[n("el-form-item",{attrs:{label:"分类名称"}},[n("el-input",{attrs:{maxlength:"10"},model:{value:e.newModel.name,callback:function(t){e.$set(e.newModel,"name","string"===typeof t?t.trim():t)},expression:"newModel.name"}})],1),n("el-form-item",{attrs:{label:"分类描述"}},[n("el-input",{attrs:{maxlength:"20"},model:{value:e.newModel.desc,callback:function(t){e.$set(e.newModel,"desc","string"===typeof t?t.trim():t)},expression:"newModel.desc"}})],1),n("el-form-item",{attrs:{label:"选择分类"}},[n("el-cascader",{attrs:{props:e.cateProps,options:e.cateList,clearable:""},on:{change:e.handleChange},model:{value:e.newModel.parent,callback:function(t){e.$set(e.newModel,"parent",t)},expression:"newModel.parent"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.okAdd}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"编辑分类",visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[n("el-form",{attrs:{"label-width":"70px"}},[n("el-form-item",{attrs:{label:"分类名称"}},[n("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),n("el-form-item",{attrs:{label:"分类描述"}},[n("el-input",{attrs:{maxlength:"20"},model:{value:e.model.desc,callback:function(t){e.$set(e.model,"desc","string"===typeof t?t.trim():t)},expression:"model.desc"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.okEdit}},[e._v("确 定")])],1)],1)],1)},r=[],i=n("b85c"),l=n("1da1"),c=(n("96cf"),n("e5ce")),s=n("2fbc"),o={name:"CategoryEdit",components:{Breadcrumb:s["a"]},data:function(){return{newModel:{},model:{},cateList:[],cateProps:{expandTrigger:"hover",value:"_id",label:"name",children:"children",emitPath:!1,checkStrictly:!0},columns:[{label:"分类名称",prop:"name",align:"center",headerAlign:"center"},{label:"操作",type:"template",template:"operate",align:"center",headerAlign:"center"}],id:"",editDialogVisible:!1,addDialogVisible:!1}},methods:{getCateList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,a,r,l,s,o,d,u,b,p,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["d"])();case 2:n=t.sent,a=n.data,r=Object(i["a"])(a),t.prev=5,r.s();case 7:if((l=r.n()).done){t.next=34;break}if(s=l.value,!s.children||0!==s.children.length){t.next=12;break}return s.children=null,t.abrupt("continue",32);case 12:o=Object(i["a"])(s.children),t.prev=13,o.s();case 15:if((d=o.n()).done){t.next=24;break}if(u=d.value,!u.children||0!==u.children.length){t.next=20;break}return u.children=null,t.abrupt("continue",22);case 20:b=Object(i["a"])(u.children);try{for(b.s();!(p=b.n()).done;)m=p.value,m.children=null,m.disabled=!0}catch(f){b.e(f)}finally{b.f()}case 22:t.next=15;break;case 24:t.next=29;break;case 26:t.prev=26,t.t0=t["catch"](13),o.e(t.t0);case 29:return t.prev=29,o.f(),t.finish(29);case 32:t.next=7;break;case 34:t.next=39;break;case 36:t.prev=36,t.t1=t["catch"](5),r.e(t.t1);case 39:return t.prev=39,r.f(),t.finish(39);case 42:e.cateList=a;case 43:case"end":return t.stop()}}),t,null,[[5,36,39,42],[13,26,29,32]])})))()},handleChange:function(){},addCate:function(){this.addDialogVisible=!0},okAdd:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["a"])(e.newModel);case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:e.$message.success("添加分类成功"),e.getCateList(),e.addDialogVisible=!1;case 8:case"end":return t.stop()}}),t)})))()},addDialogClose:function(){this.newModel={}},editCateClick:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.id=e._id,n.next=3,Object(c["c"])(e._id);case 3:a=n.sent,t.model=a.data,t.editDialogVisible=!0;case 6:case"end":return n.stop()}}),n)})))()},okEdit:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["e"])(e.id,e.model);case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:e.$message.success("编辑分类成功"),e.getCateList(),e.editDialogVisible=!1;case 8:case"end":return t.stop()}}),t)})))()},deleteCateClick:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 3:if(!(e.children&&e.children.length>0)){n.next=5;break}return n.abrupt("return",t.$message.error("无法删除包含子分类的父级分类"));case 5:return n.next=7,Object(c["b"])(e._id);case 7:if(a=n.sent,a){n.next=10;break}return n.abrupt("return");case 10:t.$message.success("删除分类成功"),t.getCateList(),n.next=17;break;case 14:n.prev=14,n.t0=n["catch"](0),t.$message.info("已取消删除");case 17:case"end":return n.stop()}}),n,null,[[0,14]])})))()}},created:function(){this.getCateList()}},d=o,u=n("2877"),b=Object(u["a"])(d,a,r,!1,null,"16e1b49b",null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-2d0c1d78.a8c30472.js.map